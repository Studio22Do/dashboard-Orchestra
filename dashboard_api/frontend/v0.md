"use client"

import { useState } from "react"
import ProfileHeader from "@/components/profile/profile-header"
import PersonalInfo from "@/components/profile/personal-info"
import PasswordChange from "@/components/profile/password-change"
import { ChevronLeft } from "lucide-react"
import { Button } from "@/components/ui/button"
import type { User } from "@/types/user"

export default function ProfilePage() {
  // Mock user data
  const [user, setUser] = useState<User>({
    id: 1,
    email: "john.doe@example.com",
    name: "John Doe",
    role: "admin",
    plan: "premium",
    is_active: true,
    created_at: "2023-01-15T10:30:00Z",
    avatar: "/placeholder.svg?height=200&width=200",
    phone: "+1 (555) 123-4567",
    company: "Acme Inc.",
    website: "https://acme.com",
    location: "San Francisco, CA",
    bio: "Marketing specialist with 10+ years of experience in digital marketing and analytics.",
    timezone: "America/Los_Angeles",
    language: "en",
    notification_preferences: {
      email: true,
      push: true,
      marketing: false,
    },
    api_usage: {
      calls_this_month: 7500,
      limit: 10000,
    },
  })

  const updateUser = (updatedData: Partial<User>) => {
    setUser((prev) => ({ ...prev, ...updatedData }))
  }

  return (
    <div className="container mx-auto px-4 py-8 text-white">
      <div className="mb-6 flex items-center gap-2 text-sm text-[rgba(255,255,255,0.7)]">
        <Button
          variant="ghost"
          size="sm"
          className="flex items-center gap-1 text-[rgba(255,255,255,0.7)] hover:text-white"
        >
          <ChevronLeft className="h-4 w-4" />
          Back to Dashboard
        </Button>
        <span>/</span>
        <span>Mi Perfil</span>
      </div>

      <ProfileHeader user={user} updateUser={updateUser} />

      <div className="mt-8 space-y-8">
        <PersonalInfo user={user} updateUser={updateUser} />
        <PasswordChange />
      </div>
    </div>
  )
}


"use client"

import type React from "react"

import { useState } from "react"
import { Button } from "@/components/ui/button"
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card"
import { Input } from "@/components/ui/input"
import { Label } from "@/components/ui/label"
import { toast } from "@/components/ui/use-toast"
import { Toaster } from "@/components/ui/toaster"
import { Save } from "lucide-react"

export default function PasswordChange() {
  const [passwordData, setPasswordData] = useState({
    currentPassword: "",
    newPassword: "",
    confirmPassword: "",
  })
  const [isSubmitting, setIsSubmitting] = useState(false)

  const handlePasswordChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    const { name, value } = e.target
    setPasswordData((prev) => ({ ...prev, [name]: value }))
  }

  const handlePasswordSubmit = (e: React.FormEvent) => {
    e.preventDefault()
    setIsSubmitting(true)

    // Validate passwords
    if (passwordData.newPassword !== passwordData.confirmPassword) {
      toast({
        title: "Error",
        description: "Las contraseñas no coinciden.",
        variant: "destructive",
      })
      setIsSubmitting(false)
      return
    }

    if (passwordData.newPassword.length < 8) {
      toast({
        title: "Error",
        description: "La contraseña debe tener al menos 8 caracteres.",
        variant: "destructive",
      })
      setIsSubmitting(false)
      return
    }

    // Simulate API call
    setTimeout(() => {
      setIsSubmitting(false)
      setPasswordData({
        currentPassword: "",
        newPassword: "",
        confirmPassword: "",
      })
      toast({
        title: "Contraseña actualizada",
        description: "Tu contraseña ha sido actualizada correctamente.",
      })
    }, 1000)
  }

  return (
    <>
      <Card className="bg-[#272038] text-white">
        <CardHeader>
          <CardTitle>Cambiar contraseña</CardTitle>
        </CardHeader>
        <CardContent>
          <form onSubmit={handlePasswordSubmit} className="space-y-4">
            <div className="space-y-2">
              <Label htmlFor="currentPassword">Contraseña actual</Label>
              <Input
                id="currentPassword"
                name="currentPassword"
                type="password"
                value={passwordData.currentPassword}
                onChange={handlePasswordChange}
                className="border-[#342A5B] bg-[#1a1625] text-white focus-visible:ring-[#AC9DFB]"
                required
              />
            </div>
            <div className="space-y-2">
              <Label htmlFor="newPassword">Nueva contraseña</Label>
              <Input
                id="newPassword"
                name="newPassword"
                type="password"
                value={passwordData.newPassword}
                onChange={handlePasswordChange}
                className="border-[#342A5B] bg-[#1a1625] text-white focus-visible:ring-[#AC9DFB]"
                required
                minLength={8}
              />
              <p className="text-xs text-[rgba(255,255,255,0.7)]">La contraseña debe tener al menos 8 caracteres</p>
            </div>
            <div className="space-y-2">
              <Label htmlFor="confirmPassword">Confirmar contraseña</Label>
              <Input
                id="confirmPassword"
                name="confirmPassword"
                type="password"
                value={passwordData.confirmPassword}
                onChange={handlePasswordChange}
                className="border-[#342A5B] bg-[#1a1625] text-white focus-visible:ring-[#AC9DFB]"
                required
              />
            </div>
            <div className="flex justify-end">
              <Button type="submit" disabled={isSubmitting} className="bg-[#837cf2] hover:bg-[#AC9DFB]">
                {isSubmitting ? (
                  "Actualizando..."
                ) : (
                  <>
                    <Save className="mr-2 h-4 w-4" /> Actualizar contraseña
                  </>
                )}
              </Button>
            </div>
          </form>
        </CardContent>
      </Card>
      <Toaster />
    </>
  )
}
